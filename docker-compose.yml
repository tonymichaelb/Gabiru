version: '3.8'

services:
  gabiru:
    image: tonymichael/gabiru:latest
    container_name: gabiru
    network_mode: host  # Necessário para Wi-Fi (nmcli) e acesso completo à rede
    volumes:
      - gabiru-data:/app/data
      - /dev:/dev  # Acesso a todos os dispositivos (serial, GPIO)
      - /sys:/sys  # Necessário para GPIO
      - /run/dbus:/run/dbus:ro  # Necessário para NetworkManager (Wi-Fi)
    environment:
      - TZ=America/Sao_Paulo
    restart: unless-stopped
    privileged: true  # Necessário para acesso ao GPIO e serial

volumes:
  gabiru-data:
    driver: local
